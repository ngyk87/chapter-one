<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter One - A Journey with DataKind SG</title>
  <meta name="description" content="The first thing to read when you want to volunteer for DataKind Singapore">
  <meta name="generator" content="bookdown 0.7.3 and GitBook 2.6.7">

  <meta property="og:title" content="Chapter One - A Journey with DataKind SG" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The first thing to read when you want to volunteer for DataKind Singapore" />
  <meta name="github-repo" content="datakind-sg/chapter-one" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter One - A Journey with DataKind SG" />
  
  <meta name="twitter:description" content="The first thing to read when you want to volunteer for DataKind Singapore" />
  

<meta name="author" content="DataKind SG">


<meta name="date" content="2018-03-23">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="managing-code.html">
<link rel="next" href="data-protection-and-information-ethics.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Chapter One - A Journey with DataKind SG</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#goals"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="overview-of-project-flow.html"><a href="overview-of-project-flow.html"><i class="fa fa-check"></i><b>1</b> Overview of Project Flow</a><ul>
<li class="chapter" data-level="1.1" data-path="overview-of-project-flow.html"><a href="overview-of-project-flow.html#project-funnel"><i class="fa fa-check"></i><b>1.1</b> Project Funnel</a></li>
<li class="chapter" data-level="1.2" data-path="overview-of-project-flow.html"><a href="overview-of-project-flow.html#project-accelerators"><i class="fa fa-check"></i><b>1.2</b> Project Accelerators</a></li>
<li class="chapter" data-level="1.3" data-path="overview-of-project-flow.html"><a href="overview-of-project-flow.html#datajams"><i class="fa fa-check"></i><b>1.3</b> DataJams</a></li>
<li class="chapter" data-level="1.4" data-path="overview-of-project-flow.html"><a href="overview-of-project-flow.html#datadive"><i class="fa fa-check"></i><b>1.4</b> DataDive</a></li>
<li class="chapter" data-level="1.5" data-path="overview-of-project-flow.html"><a href="overview-of-project-flow.html#datacorps"><i class="fa fa-check"></i><b>1.5</b> DataCorps</a></li>
<li class="chapter" data-level="1.6" data-path="overview-of-project-flow.html"><a href="overview-of-project-flow.html#datalearn"><i class="fa fa-check"></i><b>1.6</b> DataLearn</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="project-management.html"><a href="project-management.html"><i class="fa fa-check"></i><b>2</b> Project Management</a><ul>
<li class="chapter" data-level="2.1" data-path="project-management.html"><a href="project-management.html#tracking-progress"><i class="fa fa-check"></i><b>2.1</b> Tracking Progress</a></li>
<li class="chapter" data-level="2.2" data-path="project-management.html"><a href="project-management.html#tasks-and-assignment"><i class="fa fa-check"></i><b>2.2</b> Tasks and Assignment</a></li>
<li class="chapter" data-level="2.3" data-path="project-management.html"><a href="project-management.html#recommended-roles"><i class="fa fa-check"></i><b>2.3</b> Recommended Roles</a></li>
<li class="chapter" data-level="2.4" data-path="project-management.html"><a href="project-management.html#tips"><i class="fa fa-check"></i><b>2.4</b> Tips</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>3</b> Data Cleaning</a><ul>
<li class="chapter" data-level="3.1" data-path="data-cleaning.html"><a href="data-cleaning.html#test-driven-data-cleaning"><i class="fa fa-check"></i><b>3.1</b> Test Driven Data Cleaning</a><ul>
<li class="chapter" data-level="3.1.1" data-path="data-cleaning.html"><a href="data-cleaning.html#for-volunteers"><i class="fa fa-check"></i><b>3.1.1</b> For Volunteers</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-cleaning.html"><a href="data-cleaning.html#for-team-leads"><i class="fa fa-check"></i><b>3.1.2</b> For Team Leads</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="managing-code.html"><a href="managing-code.html"><i class="fa fa-check"></i><b>4</b> Managing Code</a><ul>
<li class="chapter" data-level="4.1" data-path="managing-code.html"><a href="managing-code.html#version-control"><i class="fa fa-check"></i><b>4.1</b> Version Control</a></li>
<li class="chapter" data-level="4.2" data-path="managing-code.html"><a href="managing-code.html#github-faqs"><i class="fa fa-check"></i><b>4.2</b> Github FAQs</a><ul>
<li class="chapter" data-level="4.2.1" data-path="managing-code.html"><a href="managing-code.html#the-csv.gz-files-seems-to-be-too-smallcorrupted-what-should-i-do"><i class="fa fa-check"></i><b>4.2.1</b> The csv.gz files seems to be too small/corrupted, what should I do?</a></li>
<li class="chapter" data-level="4.2.2" data-path="managing-code.html"><a href="managing-code.html#im-new-to-git-where-can-i-get-more-information"><i class="fa fa-check"></i><b>4.2.2</b> I’m new to Git, where can I get more information?</a></li>
<li class="chapter" data-level="4.2.3" data-path="managing-code.html"><a href="managing-code.html#how-to-clone-a-git-repository"><i class="fa fa-check"></i><b>4.2.3</b> How to clone a git repository?</a></li>
<li class="chapter" data-level="4.2.4" data-path="managing-code.html"><a href="managing-code.html#how-to-load-csv.gz-files"><i class="fa fa-check"></i><b>4.2.4</b> How to load csv.gz files?</a></li>
<li class="chapter" data-level="4.2.5" data-path="managing-code.html"><a href="managing-code.html#how-can-i-safely-edit-the-code-and-data-files"><i class="fa fa-check"></i><b>4.2.5</b> How can I safely edit the code and data files?</a></li>
<li class="chapter" data-level="4.2.6" data-path="managing-code.html"><a href="managing-code.html#doing-a-git-branch"><i class="fa fa-check"></i><b>4.2.6</b> Doing a git branch</a></li>
<li class="chapter" data-level="4.2.7" data-path="managing-code.html"><a href="managing-code.html#how-to-submit-changes-to-the-code-repository"><i class="fa fa-check"></i><b>4.2.7</b> How to submit changes to the code repository</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="managing-code.html"><a href="managing-code.html#directory-structure"><i class="fa fa-check"></i><b>4.3</b> Directory Structure</a></li>
<li class="chapter" data-level="4.4" data-path="managing-code.html"><a href="managing-code.html#code-style"><i class="fa fa-check"></i><b>4.4</b> Code Style</a></li>
<li class="chapter" data-level="4.5" data-path="managing-code.html"><a href="managing-code.html#preamble-information-to-be-placed-at-the-top-of-every-script"><i class="fa fa-check"></i><b>4.5</b> Preamble information to be placed at the top of every script</a></li>
<li class="chapter" data-level="4.6" data-path="managing-code.html"><a href="managing-code.html#quickstart-templates"><i class="fa fa-check"></i><b>4.6</b> Quickstart Templates</a></li>
<li class="chapter" data-level="4.7" data-path="managing-code.html"><a href="managing-code.html#tips-1"><i class="fa fa-check"></i><b>4.7</b> Tips</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="docker-pipeline-for-reproducible-research.html"><a href="docker-pipeline-for-reproducible-research.html"><i class="fa fa-check"></i><b>5</b> Docker Pipeline for Reproducible Research</a><ul>
<li class="chapter" data-level="5.1" data-path="docker-pipeline-for-reproducible-research.html"><a href="docker-pipeline-for-reproducible-research.html#overview"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="docker-pipeline-for-reproducible-research.html"><a href="docker-pipeline-for-reproducible-research.html#prerequisites"><i class="fa fa-check"></i><b>5.2</b> Prerequisites</a></li>
<li class="chapter" data-level="5.3" data-path="docker-pipeline-for-reproducible-research.html"><a href="docker-pipeline-for-reproducible-research.html#task-1-setup-dockerfile"><i class="fa fa-check"></i><b>5.3</b> Task 1: Setup Dockerfile</a></li>
<li class="chapter" data-level="5.4" data-path="docker-pipeline-for-reproducible-research.html"><a href="docker-pipeline-for-reproducible-research.html#task-2-setup-ci-and-build-docker-image"><i class="fa fa-check"></i><b>5.4</b> Task 2: Setup CI and Build Docker Image</a></li>
<li class="chapter" data-level="5.5" data-path="docker-pipeline-for-reproducible-research.html"><a href="docker-pipeline-for-reproducible-research.html#task-3-curate-deliverables"><i class="fa fa-check"></i><b>5.5</b> Task 3: Curate Deliverables</a></li>
<li class="chapter" data-level="5.6" data-path="docker-pipeline-for-reproducible-research.html"><a href="docker-pipeline-for-reproducible-research.html#task-4-resolve-environment-issue"><i class="fa fa-check"></i><b>5.6</b> Task 4: Resolve Environment Issue</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-protection-and-information-ethics.html"><a href="data-protection-and-information-ethics.html"><i class="fa fa-check"></i><b>6</b> Data Protection and Information Ethics</a><ul>
<li class="chapter" data-level="6.1" data-path="data-protection-and-information-ethics.html"><a href="data-protection-and-information-ethics.html#data-protection"><i class="fa fa-check"></i><b>6.1</b> Data Protection</a></li>
<li class="chapter" data-level="6.2" data-path="data-protection-and-information-ethics.html"><a href="data-protection-and-information-ethics.html#information-ethics"><i class="fa fa-check"></i><b>6.2</b> Information Ethics</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>7</b> Resources</a><ul>
<li class="chapter" data-level="7.1" data-path="resources.html"><a href="resources.html#tools"><i class="fa fa-check"></i><b>7.1</b> Tools</a><ul>
<li class="chapter" data-level="7.1.1" data-path="resources.html"><a href="resources.html#test-driven-data-cleaning-1"><i class="fa fa-check"></i><b>7.1.1</b> Test Driven Data Cleaning</a></li>
<li class="chapter" data-level="7.1.2" data-path="resources.html"><a href="resources.html#github"><i class="fa fa-check"></i><b>7.1.2</b> Github</a></li>
<li class="chapter" data-level="7.1.3" data-path="resources.html"><a href="resources.html#trello"><i class="fa fa-check"></i><b>7.1.3</b> Trello</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="resources.html"><a href="resources.html#cheatsheets"><i class="fa fa-check"></i><b>7.2</b> Cheatsheets</a><ul>
<li class="chapter" data-level="7.2.1" data-path="resources.html"><a href="resources.html#r"><i class="fa fa-check"></i><b>7.2.1</b> R</a></li>
<li class="chapter" data-level="7.2.2" data-path="resources.html"><a href="resources.html#python"><i class="fa fa-check"></i><b>7.2.2</b> Python</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="resources.html"><a href="resources.html#videos"><i class="fa fa-check"></i><b>7.3</b> Videos</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i><b>8</b> About</a><ul>
<li class="chapter" data-level="8.1" data-path="about.html"><a href="about.html#about-dksg"><i class="fa fa-check"></i><b>8.1</b> About DKSG</a></li>
<li class="chapter" data-level="8.2" data-path="about.html"><a href="about.html#contributors"><i class="fa fa-check"></i><b>8.2</b> Contributors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Chapter One - A Journey with DataKind SG</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="docker-pipeline-for-reproducible-research" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Docker Pipeline for Reproducible Research</h1>
<p>Workshop version: 1.0.0<br />
Last updated: 2018-03-23<br />
TinyUrl Links:</p>
<ul>
<li><a href="https://tinyurl.com/fossasia" class="uri">https://tinyurl.com/fossasia</a><br />
</li>
<li><a href="https://tinyurl.com/dockerlab" class="uri">https://tinyurl.com/dockerlab</a></li>
</ul>
<div id="overview" class="section level2">
<h2><span class="header-section-number">5.1</span> Overview</h2>
<p>Datakind Singapore has been using docker to help reproduce environments that were used during DataDive events. Apart from versioning the files/scripts that were used during analysis, we also version the environments where we ran such scripts. In this workshop, we’ll walkthrough how we use docker to promote reproducibility.</p>
</div>
<div id="prerequisites" class="section level2">
<h2><span class="header-section-number">5.2</span> Prerequisites</h2>
<p>In order to follow along in this workshop, you would need to have an account in github, quay.io, and play-with-docker.</p>
<p>If you don’t have yet, kindly create an account in the following platforms:</p>
<ul>
<li><p><img src="resources/images/docker-pipeline/image_0.png" /> <a href="https://github.com" class="uri">https://github.com</a></p></li>
<li><p><img src="resources/images/docker-pipeline/image_1.png" /> <a href="https://quay.io" class="uri">https://quay.io</a></p></li>
<li><p><img src="resources/images/docker-pipeline/image_2.png" /><a href="https://labs.play-with-docker.com/" class="uri">https://labs.play-with-docker.com/</a></p></li>
</ul>
</div>
<div id="task-1-setup-dockerfile" class="section level2">
<h2><span class="header-section-number">5.3</span> Task 1: Setup Dockerfile</h2>
<ol style="list-style-type: decimal">
<li><p>Before a DataDive event, we try to engage with the NGO team representatives to know what data tools the volunteers will be using during the event. Based on previous DataDive events, RStudio and Jupyter Notebooks tend to be popular among volunteers. In this workshop, we’ll try to build a docker image for a python jupyter notebook. To save time, we already prepared a dockerfile and related demo materials for you.</p>
<p>Login to your github using your account.</p>
<p>Then, kindly fork the following repository to your github account:</p>
<p><a href="https://github.com/DataKind-SG/contain-yourself" class="uri">https://github.com/DataKind-SG/contain-yourself</a> <img src="resources/images/docker-pipeline/image_3.png" /></p>
<p>Once fork is done, “contain-yourself” repo should now be reflected in your github account.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_4.png" />

</div></li>
<li><p>Open and examine your dockerfile:</p>
<p><code>https://github.com/&lt;github_account&gt;/contain-yourself/tree/master/workshop/demo_docker_setup/Dockerfile</code></p>
<ul>
<li><p>Replace <strong>&lt;github_account&gt;</strong> with your github account</p></li>
<li><p>e.g. <a href="https://github.com/therealdatascientist/contain-yourself/tree/master/workshop/demo_docker_setup/Dockerfile" class="uri">https://github.com/therealdatascientist/contain-yourself/tree/master/workshop/demo_docker_setup/Dockerfile</a></p></li>
</ul>
<div class="figure">
<img src="resources/images/docker-pipeline/image_5.png" />

</div>
<p>In this dockerfile, we’re using the jupyter/minimal-notebook <strong>base image</strong>. This contains the corresponding OS and minimal python installation to support jupyter notebook. We also reference the <strong>version of the base image</strong>, so that we won’t be affected in case the version of the base image increments. This is so that we can still reproduce that actual base image used when the data analysis was done.</p>
<p>We also keep track of the python package versions that will later be used when building our jupyter image. You can find the list inside the requirements file:</p>
<p><code>https://github.com/&lt;github_account&gt;/contain-yourself/tree/master/workshop/demo_docker_setup/requirements.txt</code></p></li>
<li><p>Now that our dockerfile is ready, we can proceed in syncing github to a continuous integration (CI) process.</p></li>
</ol>
</div>
<div id="task-2-setup-ci-and-build-docker-image" class="section level2">
<h2><span class="header-section-number">5.4</span> Task 2: Setup CI and Build Docker Image</h2>
<ol style="list-style-type: decimal">
<li><p>Login to your quay.io account and go to the repository homepage: <a href="https://quay.io/repository/" class="uri">https://quay.io/repository/</a></p></li>
<li><p>Create a new repository <img src="resources/images/docker-pipeline/image_6.png" /></p></li>
<li><p>Set it up as follows:</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_7.png" />

</div></li>
<li><p>Click “Create Public Repository”</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_8.png" />

</div></li>
<li><p>Authorize coreos</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_9.png" />

</div></li>
<li><p>Select the organization under which the repository lives. In this workshop, use your github account. Then, click <strong>continue</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_10.png" />

</div></li>
<li><p>Select the contain-yourself repository under your github account.</p>
<p>Then, click <strong>continue</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_11.png" />

</div></li>
<li><p>Configure the <strong>trigger </strong>so that it will only build the container image if there’s a new change in the master branch. Then, click <strong>continue</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_12.png" />

</div></li>
<li><p>Select the Dockerfile under workshop: <strong>/workshop/demo_docker_setup/Dockerfile</strong></p>
<p>Then, click <strong>continue</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_13.png" />

</div></li>
<li><p>Select the context where our dockerfile is located: <strong>/workshop/demo_docker_setup</strong></p>
<p>Then, click <strong>continue</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_14.png" />

</div></li>
<li><p>There’s no need for a Robot Account as we’re using a public base image.</p>
<p>Just click <strong>continue</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_15.png" />

</div></li>
<li><p>Whew! We’re ready to go.</p>
<p>Click <strong>continue</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_16.png" />

</div></li>
<li><p>Click the link to return to your repository page</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_17.png" />

</div></li>
<li><p>Initiate a new build by clicking “<strong>Start New Build</strong>” button</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_18.png" />

</div></li>
<li><p>Click “<strong>Run Trigger Now</strong>”</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_19.png" />

</div></li>
<li><p>Select <strong>master</strong> branch. Then, click “<strong>Start Build</strong>” button.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_20.png" />

</div></li>
<li><p>You should see the flashing dots indicating that the build has started.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_21.png" />

</div></li>
<li><p>Once the build is complete <img src="resources/images/docker-pipeline/image_22.png" />, click the <strong>label </strong>section <img src="resources/images/docker-pipeline/image_23.png" />.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_24.png" />

</div></li>
<li><p>Click the <strong>setting </strong>button on the <strong>latest </strong>tag and click “<strong>Add New Tag</strong>”</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_25.png" />

</div></li>
<li><p>Enter the version as the tag name. We use semantic versioning (<a href="https://semver.org/" class="uri">https://semver.org/</a>) MAJOR.MINOR.PATCH</p>
<p>Enter <strong>1.0.0</strong></p>
<p>Then, click “<strong>Create Tag</strong>” button</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_26.png" />

</div></li>
<li><p>You should now see a new tag (version) displayed.</p>
<p>This is how we version our environments to promote reproducibility later.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_27.png" />

</div></li>
<li><p>Now that we have a versioned notebook image (environment),</p>
<p>You can proceed in curating our volunteers’ deliverables and confirm if you can reproduce their analysis.</p></li>
</ol>
</div>
<div id="task-3-curate-deliverables" class="section level2">
<h2><span class="header-section-number">5.5</span> Task 3: Curate Deliverables</h2>
<p>Trivia: In the previous DataDive, we have a dedicated team of deliverable curators.<br />
We call them our Docker Captains. They help confirm and ensure that our volunteers’ analysis/outputs are reproducible. In this task, we’ll put on our Docker Captain hat and curate some jupyter notebooks.</p>
<ol style="list-style-type: decimal">
<li><p>Docker captains usually have docker installed in their laptops during the DataDive and use that for curation. However in this workshop, we’ll use play-with-docker so that you don’t need to setup docker locally in your machine.</p>
<p><strong>Login </strong>to Play with Docker: <a href="https://labs.play-with-docker.com/" class="uri">https://labs.play-with-docker.com/</a></p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_28.png" />

</div></li>
<li><p>Click <strong>Start</strong></p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_29.png" />

</div></li>
<li><p>Click <strong>ADD NEW INSTANCE</strong></p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_30.png" />

</div></li>
<li><p>In the console, git clone your <strong>contain-yourself </strong>github repo.</p>
<p>Type the following:</p>
<p><code>git clone https://github.com/&lt;your github account&gt;/contain-yourself.git</code></p>
<p>Then, hit <strong>enter</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_31.png" />

</div></li>
<li><p>Type the following:</p>
<p><code>docker run -p 80:8888 -v /root/contain-yourself/workshop/demo_notebooks:/home/jovyan/work quay.io/&lt;your quay.io account name&gt;/workshop-notebook:1.0.0</code></p>
<p>Then, hit <strong>enter</strong>.</p>
<p>It will start pulling the image from quay.io.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_32.png" />

</div></li>
<li><p>Once your jupyter token is ready, <strong>click </strong>on the port <strong>80</strong> link</p>
<p>In the previous step, we had mapped our container’s port <strong>8888</strong> to the host’s port <strong>80</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_33.png" />

</div></li>
<li><p>A new tab will open for jupyter.</p>
<p>Enter your jupyter token accordingly and click <strong>Log in</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_34.png" />

</div></li>
<li><p>You should now see 2 notebooks and 1 json data file.</p>
<p>Click the notebook of volunteer <strong>1</strong>: analysis_from_volunteer_<strong>1</strong>.ipynb</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_35.png" />

</div></li>
<li><p>In volunteer 1’s notebook, click <strong>Cell</strong>.</p>
<p>Then, click <strong>Run All</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_36.png" />

</div></li>
<li><p>Scroll to the bottom of the notebook.</p>
<p>You should see the following stacked bar chart generated:</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_37.png" />

</div></li>
<li><p>Woohoo! We just successfully reproduced Volunteer 1’s analysis.</p>
<p>Note: Ideally, the docker captain will now proceed to add meta data on this notebook to indicate which version of the environment was used to run this successfully. However, we’ll skip that in this workshop.</p>
<p><strong>Close </strong>the browser <strong>tab</strong> of volunteer 1’s notebook.</p>
<p>Click the notebook of volunteer <strong>2</strong>: analysis_from_volunteer_<strong>2.</strong>ipynb</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_38.png" />

</div></li>
<li><p>In volunteer 2’s notebook, click <strong>Cell</strong>.</p>
<p>Then, click <strong>Run All</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_39.png" />

</div></li>
<li><p>In the 3rd code cell, you should see this:</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_40.png" />

</div>
<p>Oh no! We don’t have bokeh in the current jupyter environment version.</p>
<p>We can’t reproduce Volunteer 2’s analysis.</p>
<p>O Captain! my Captain! Don’t be downcast</p>
<p>Your will is strong and the 4th task is your last</p></li>
</ol>
</div>
<div id="task-4-resolve-environment-issue" class="section level2">
<h2><span class="header-section-number">5.6</span> Task 4: Resolve Environment Issue</h2>
<p><strong>Note</strong>: We’re fortunate that this issue is pretty straightforward to fix.</p>
<p>We’re just missing a package (bokeh).</p>
<p>In other scenarios, docker captains face more complex issues than this (e.g. version incompatibility, missing OS binaries, etc.). It’s always helpful when the author of the deliverable is still around so that such issues can be resolved quicker.</p>
<p>In this workshop, we kept it simple.</p>
<ol style="list-style-type: decimal">
<li><p>Go back to your contain-yourself github repo and open requirements.txt:</p>
<p><code>https://github.com/&lt;your github account&gt;/contain-yourself/blob/master/workshop/demo_docker_setup/requirements.txt</code></p>
<p>Click <strong>Edit</strong></p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_41.png" />

</div></li>
<li><p>Write bokeh and its corresponding version (0.12.4) in the requirements.txt</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_42.png" />

</div></li>
<li><p>Scroll down. <strong>Add info</strong>. Then, <strong>commit changes</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_43.png" />

</div></li>
<li><p>Go back to your build page in quay.io:</p>
<p><code>https://quay.io/repository/&lt;your quay.io account&gt;/workshop-notebook?tab=builds</code></p>
<p>Notice that quay.io automatically picked up our change and started building.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_44.png" />

</div></li>
<li><p>Once the build is complete <img src="resources/images/docker-pipeline/image_45.png" />, click the <strong>label </strong>section <img src="resources/images/docker-pipeline/image_46.png" />.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_47.png" />

</div></li>
<li><p>Click the <strong>setting </strong>button on the <strong>latest </strong>tag and click “<strong>Add New Tag</strong>”</p>
<p><strong>Note</strong>: Ensure that the latest is really the latest. Check the Last Modified stamp.</p>
<p>If it’s not, try refreshing the page.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_48.png" />

</div></li>
<li><p>Enter the version as the tag name. We use semantic versioning (<a href="https://semver.org/" class="uri">https://semver.org/</a>) MAJOR.MINOR.PATCH</p>
<p>Enter 1.0.<strong>1</strong></p>
<p>Then, click “<strong>Create Tag</strong>” button</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_49.png" />

</div></li>
<li><p>You should now see a new tag (version) displayed.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_50.png" />

</div>
<p>Version 1.0.1 is the version of our jupyter image that has the bokeh package.</p></li>
<li><p>Go back to your play-with-docker console.</p>
<p>If the jupyter process is still running, kill it by hitting CTRL+C.</p>
<p>That should shutdown the jupyter kernels accordingly.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_51.png" />

</div></li>
<li><p>Type the following:</p>
<p><code>docker run -p 80:8888 -v /root/contain-yourself/workshop/demo_notebooks:/home/jovyan/work quay.io/&lt;your quay.io account name&gt;/workshop-notebook:1.0.1</code></p>
<p>Then, hit <strong>enter</strong></p>
<p>It will start pulling the new image (version 1.0.<strong>1</strong>) from quay.io.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_52.png" />

</div></li>
<li><p>Once your jupyter token is ready, <strong>click </strong>on the port <strong>80</strong> link</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_53.png" />

</div></li>
<li><p>A new tab will open for jupyter.</p>
<p>Enter your jupyter token accordingly and click <strong>Log in</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_54.png" />

</div></li>
<li><p>You should now see 2 notebooks and 1 json data file.</p>
<p>Let’s open the notebook where we had issue previously. Click the notebook of volunteer <strong>2</strong>: analysis_from_volunteer_<strong>2</strong>.ipynb</p></li>
<li><p>In volunteer 2’s notebook, click <strong>Cell</strong>.</p>
<p>Then, click <strong>Run All</strong>.</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_55.png" />

</div></li>
<li><p>Scroll to the bottom of the notebook.</p>
<p>You should see the following stacked bar chart generated:</p>
<div class="figure">
<img src="resources/images/docker-pipeline/image_56.png" />

</div></li>
<li><p>Congratulations! You fixed the environment issue and you’re now able to successfully reproduce Volunteer 2’s analysis.</p>
<p>You have the skill of a DataDive Docker Captain.</p>
<p>Checkout DataKind Singapore meetup event for volunteering opportunities:</p>
<p><a href="https://www.meetup.com/DataKind-SG/events/" class="uri">https://www.meetup.com/DataKind-SG/events/</a></p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="managing-code.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-protection-and-information-ethics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/datakind-sg/chapter-one/edit/master/reproducible_research_workshop.Rmd",
"text": "Edit"
},
"download": ["Chapter One - A Journey with DataKind-SG.pdf", "Chapter One - A Journey with DataKind-SG.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
